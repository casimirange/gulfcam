<ng-container *ngIf="(appState$ | async) as appState" [ngSwitch]="appState.dataState">
  <ng-container class="bg-white" *ngSwitchCase="DataState.LOADING_STATE">
    <div class="col-md-12 text-center my-3">
      <div class="ball-clip-rotate">
        <div style="background-color: rgb(68, 64, 84);"></div>
      </div>
    </div>
  </ng-container>

  <ng-container *ngSwitchCase="DataState.LOADED_STATE">
    <div class="app-page-title">
      <div class="page-title-wrapper">
        <div class="page-title-heading">
          <div>
            <div class="page-title-head center-elem">
<span class="d-inline-block pr-2">
<i class="lnr-user icon-gradient bg-mean-fruit"></i>
</span>
              <span class="d-inline-block">{{appState.appData.completeName}}</span>
            </div>
            <div class="page-title-subheading opacity-10">
              <nav class="" aria-label="breadcrumb">
                <ol class="breadcrumb">
                  <li class="breadcrumb-item">
                    <a>
                      <i aria-hidden="true" class="fa fa-home"></i>: &nbsp; {{appState.appData.companyName}}
                    </a>
                  </li>
                  <li class="breadcrumb-item">
                    <a>
                      <i class="fa fa-phone"></i>&nbsp; {{appState.appData.phone}}
                    </a>
                  </li>
                  <li class="active breadcrumb-item" aria-current="page">
                    <a>
                      <i class="fa fa-envelope"></i>&nbsp; {{appState.appData.email}}
                    </a>
                  </li>
                </ol>
              </nav>
            </div>
          </div>
        </div>
        <div class="page-title-actions">
          <div class="d-inline-block pr-3">
            <button type="button" data-toggle="tooltip" data-placement="left" class="btn btn-primary" title="envoyer la liste des commandes au client"
                    (click)="sendClientOrders()" data-original-title="envoyer la liste des commandes au client" [disabled]="isLoading$ | async">
              <i *ngIf="isLoading$ | async" class="fa fa-spinner fa-spin"></i>&nbsp;
              <span *ngIf="isLoading$ | async">Envoi du mail ...</span>
              <span *ngIf="!(isLoading$ | async)"><i class="fa fa-file-excel"></i> Mail Commandes</span>

            </button>
          </div>
          <button type="button" data-toggle="tooltip" data-placement="bottom" class="btn btn-primary" title="envoyer la liste des coupons au client"
                  (click)="sendClientCoupons()" data-original-title="envoyer la liste des coupons au client" [disabled]="isSending$ | async">
            <i *ngIf="isSending$ | async" class="fa fa-spinner fa-spin"></i>&nbsp;
            <span *ngIf="isSending$ | async">Envoi du mail ...</span>
            <span *ngIf="!(isSending$ | async)"><i class="fa fa-file-excel"></i> Mail Coupons</span>
          </button>

        </div>
      </div>
    </div>


  </ng-container>
  <ng-container class="bg-white"  *ngSwitchCase="DataState.ERROR_STATE">
    <div class="col-md-12 text-center">
      <div class="text-danger" >{{appState.error}}</div>
    </div>
  </ng-container>
</ng-container>



    <div class="row">
      <div class="col-md-12">
        <div class="main-card mb-3 card " id="htmlData">
          <div class="card-header">
            Liste de ses commandes
          </div>
          <ng-container *ngIf="(clientOrder$ | async) as clientOrder" [ngSwitch]="clientOrder.dataState">
            <ng-container *ngSwitchCase="DataState.LOADING_STATE">
              <div class="col-md-12 text-center my-3">
                <div class="ball-clip-rotate">
                  <div style="background-color: rgb(68, 64, 84);"></div>
                </div>
              </div>
            </ng-container>
            <ng-container *ngSwitchCase="DataState.LOADED_STATE">
          <div class="table-responsive" >
            <table class="align-middle mb-0 table table-sm table-borderless table-hover" id="element-pannes">
              <thead>
              <tr>
                <th class="">Ref#</th>
                <th class="">Date</th>
                <th class="">Magasin</th>
                <th class="">Statut</th>
              </tr>
              </thead>
              <tbody>
              <tr style="cursor: pointer" *ngFor="let order of clientOrder.appData.content" routerLink="/commandes/edit/{{order.internalReference}}">
                <td class="text-left">{{order.internalReference}}</td>
                <td class="text-left">{{order.createdAt | date: 'dd/MM/yyyy'}}</td>
                <td class="text-left" ><span *ngFor="let store of stores">{{store.internalReference == order.idStore ? store.localization : ''}}</span></td>
                <td class="text-left" > <span class="text-focus">{{getStatuts(order.status.name)}}</span> </td>
              </tr>

              </tbody>

            </table>
            <!--          dans le cas où aucune commande n'est trouvée-->
            <div *ngIf="clientOrder.appData.totalElements === 0">
              <p style="color: grey; font-size: 1.8rem;" class="text-center" >Aucune commande trouvée !</p>
            </div>
          </div>
            </ng-container>
            <ng-container class="bg-white"  *ngSwitchCase="DataState.ERROR_STATE">
              <div class="col-md-12 text-center">
                <div class="text-danger" >{{clientOrder.error}}</div>
              </div>
            </ng-container>
          </ng-container>
        </div>
      </div>
    </div>


