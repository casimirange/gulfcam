<div class="app-page-title">
  <div class="page-title-wrapper">
    <div class="page-title-heading">
      <div class="page-title-icon">
        <i class="pe-7s-settings icon-gradient bg-night-fade">
        </i>
      </div>
      <div>Stock
        <div class="page-title-subheading">Mouvement du stock </div>
      </div>
    </div>
  </div>
</div>

<ul class="body-tabs body-tabs-layout tabs-animated body-tabs-animated nav">
  <li class="nav-item">
    <a role="tab" class="nav-link" routerLink="/stock/index" routerLinkActive="active">
      <span>Stock</span>
    </a>
  </li>
  <li class="nav-item">
    <a role="tab" class="nav-link" routerLink="/stock/supply" routerLinkActive="active">
      <span>Ordre d'approvisionnement</span>
    </a>
  </li>
  <li class="nav-item">
    <a role="tab" class="nav-link" routerLink="/stock/forward" routerLinkActive="active">
      <span>Ordre de transfert</span>
    </a>
  </li>
</ul>

<div >
  <div class="row">
    <div class="col-md-12">
      <div class="main-card mb-3 card">
        <div class="card-body">
          <h5 class="card-title">Approvisionnement entrepôt de vente</h5>
          <form [formGroup]="supplyForm">
            <div class="form-row">
<!--              <div class="col-md-6">-->
<!--                <div class="position-relative form-group">-->
<!--                  <label>Magasin 1</label>-->
<!--                  <input id="exampleEmail" placeholder="Email..." type="email" name="email" class="form-control form-control-sm"-->
<!--                         formControlName="email" >-->
<!--                </div>-->
<!--                <div *ngIf="form['email'].invalid && (form['email'].dirty || form['email'].touched)"-->
<!--                     class="mb-2"  style="color: #f65656; font-style: italic;">-->

<!--                  <div *ngIf="form['email'].errors?.['required']" class="ml-3">-->
<!--                    l'email est obligatoire.-->
<!--                  </div>-->
<!--                  <div *ngIf="form['email'].errors?.['email']" class="ml-3">-->
<!--                    entrez une email valide : example@example.com-->
<!--                  </div>-->
<!--                </div>-->
<!--              </div>-->
<!--              <div class="col-md-6">-->
<!--                <div class="position-relative form-group">-->
<!--                  <label>Magasin 2</label>-->
<!--                  <input id="telephone" placeholder="téléphone..." type="text" name="telephone" class="form-control form-control-sm"-->
<!--                         formControlName="telephone" >-->
<!--                </div>-->
<!--                <div *ngIf="form['telephone'].invalid && (form['telephone'].dirty || form['telephone'].touched)"-->
<!--                     class="mb-2"  style="color: #f65656; font-style: italic;">-->

<!--                  <div *ngIf="form['telephone'].errors?.['required']" class="ml-3">-->
<!--                    le numéro de téléphone est obligatoire.-->
<!--                  </div>-->
<!--                  <div *ngIf="form['telephone'].errors?.['pattern']" class="ml-3">-->
<!--                    Le numéro de téléphone doit comporter 9 chiffres commençant par 2 ou par 6-->
<!--                  </div>-->
<!--                </div>-->
<!--              </div>-->
              <div class="col-md-6">
                <div class="position-relative form-group">
                  <label>Entrepôt de stockage (Espace 1)</label>
                  <select formControlName="idStoreHouseStockage" class="form-control form-control-sm">
                    <option *ngFor="let store of storeHouses1" [value]="store.internalReference">{{store.name}}</option>
                  </select>
                </div>
                <div *ngIf="form['idStoreHouseStockage'].invalid && (form['idStoreHouseStockage'].dirty || form['idStoreHouseStockage'].touched)"
                     class="mb-2"  style="color: #f65656; font-style: italic;">

                  <div *ngIf="form['idStoreHouseStockage'].errors?.['required']" class="ml-3">
                    le code pin est obligatoire.
                  </div>
                  <div *ngIf="form['idStoreHouseStockage'].errors?.['pattern']" class="ml-3">
                    Le code pin est un nombre
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="position-relative form-group">
                  <!--                        <input id="idStore" placeholder="Magasin" type="text" name="idStore" class="form-control form-control-sm"  formControlName="idStore">-->
                  <!--                    <input type="text" id="clientref" class="form-control" formControlName="idStore" placeholder="choisir un magasin" -->
                  <!--                           list="storeListOption"  [(ngModel)]="user.idStore">-->
                  <label>Entrepôt de vente (Espace 2)</label>
                  <select formControlName="idStoreHouseSell" class="form-control form-control-sm">
                    <option *ngFor="let store of storeHouses2" [value]="store.internalReference">{{store.name}}</option>
                  </select>
                </div>
                <div *ngIf="form['idStoreHouseSell'].invalid && (form['idStoreHouseSell'].dirty || form['idStoreHouseSell'].touched)"
                     class="mb-2"  style="color: #f65656; font-style: italic;">

                  <div *ngIf="form['idStoreHouseSell'].errors?.['required']" class="ml-3">
                    le magasin est obligatoire.
                  </div>
                  <!--                        <div *ngIf="form['idStore'].errors?.['pattern']" class="ml-3">-->
                  <!--                          Le magasin est un nombre-->
                  <!--                        </div>-->
                </div>
              </div>
              <div class="divider"></div>
              <div class="col-md-12">
                <div class="position-relative form-group">
                  <label for="tb" class="">Type de coupon</label>
                  <select name="select" id="tb" class="form-control" formControlName="typeVoucher">
                    <option value="" selected  hidden>Sélectionner un coupon</option>
                    <option *ngFor="let tVoucher of vouchers">{{tVoucher.amount}}</option>
                  </select>
                </div>
                  <div *ngIf="form['typeVoucher'].invalid && (form['typeVoucher'].dirty || form['typeVoucher'].touched)"
                     class="mb-2"  style="color: #f65656; font-style: italic;">

                  <div *ngIf="form['typeVoucher'].errors?.['required']" class="ml-3">
                    le type de coupon est obligatoire.
                  </div>
                </div>
              </div>
              <div class="col-md-12">
                <div class="position-relative form-group">
                  <label for="serialnumber" class="">Numéro du carton</label>
                  <input type="text" id="serialnumber" [(ngModel)]="sn" formControlName="number" class="form-control">
                </div>
                <div *ngIf="form['number'].invalid && (form['number'].dirty || form['number'].touched)"
                     class="mb-2"  style="color: #f65656; font-style: italic;">

                  <div *ngIf="form['number'].errors?.['required']" class="ml-3">
                    le numéro de série est obligatoire.
                  </div>

                </div>
                <div *ngIf="(typcoupon == 10000 ) && (sn < 1 || sn > 100) && sn != ''" style="color: #f65656; font-style: italic;" >
                  <span>*</span> Veuillez saisir une valeur comprise entre 0 et 100
                </div>
                <div *ngIf="(typcoupon == 5000 ) && (sn < 101 || sn > 130) && sn != '' " style="color: #f65656; font-style: italic;">
                  <span>*</span> Veuillez saisir une valeur comprise entre 100 et 130
                </div>
                <div *ngIf="(typcoupon == 3000 ) && (sn < 131 || sn > 145) && sn != '' " style="color: #f65656; font-style: italic;">
                  <span>*</span> Veuillez saisir une valeur comprise entre 131 et 145
                </div>
              </div>

                <div class="col-md-6">
                  <div class="position-relative form-group">
                    <label for="serialnumber" class="">Début numéro de série du carton</label>
                    <input type="text" id="serialnumber"  formControlName="serialTo" class="form-control">
                  </div>
                  <div *ngIf="form['serialTo'].invalid && (form['serialTo'].dirty || form['serialTo'].touched)"
                       class="mb-2"  style="color: #f65656; font-style: italic;">

                    <div *ngIf="form['serialTo'].errors?.['required']" class="ml-3">
                      le numéro de série est obligatoire.
                    </div>
                    <!--                <div *ngIf="cartonForm.controls['serialNumber'].errors?.['min']" class="ml-3">-->
                    <!--                  entrez un numéro supérieur-->
                    <!--                </div>-->
                    <!--                <div *ngIf="cartonForm.controls['serialNumber'].errors?.['max']" class="ml-3">-->
                    <!--                  entrez un numéro inférieur-->
                    <!--                </div>-->

                  </div>
                  <div *ngIf="(typcoupon == 10000 ) && (sn < 1 || sn > 100) && sn != ''" style="color: #f65656; font-style: italic;" >
                    <span>*</span> Veuillez saisir une valeur comprise entre 0 et 100
                  </div>
                  <div *ngIf="(typcoupon == 5000 ) && (sn < 101 || sn > 130) && sn != '' " style="color: #f65656; font-style: italic;">
                    <span>*</span> Veuillez saisir une valeur comprise entre 100 et 130
                  </div>
                  <div *ngIf="(typcoupon == 3000 ) && (sn < 131 || sn > 145) && sn != '' " style="color: #f65656; font-style: italic;">
                    <span>*</span> Veuillez saisir une valeur comprise entre 131 et 145
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="position-relative form-group">
                    <label for="serialnumber" class="">Fin numéro de série du carton</label>
                    <input type="text" id="serialnumber"  formControlName="serialFrom" class="form-control">
                  </div>
                  <div *ngIf="form['serialFrom'].invalid && (form['serialFrom'].dirty || form['serialFrom'].touched)"
                       class="mb-2"  style="color: #f65656; font-style: italic;">

                    <div *ngIf="form['serialFrom'].errors?.['required']" class="ml-3">
                      le numéro de série est obligatoire.
                    </div>
                    <!--                <div *ngIf="cartonForm.controls['serialNumber'].errors?.['min']" class="ml-3">-->
                    <!--                  entrez un numéro supérieur-->
                    <!--                </div>-->
                    <!--                <div *ngIf="cartonForm.controls['serialNumber'].errors?.['max']" class="ml-3">-->
                    <!--                  entrez un numéro inférieur-->
                    <!--                </div>-->

                  </div>
                  <div *ngIf="(typcoupon == 10000 ) && (sn < 1 || sn > 100) && sn != ''" style="color: #f65656; font-style: italic;" >
                    <span>*</span> Veuillez saisir une valeur comprise entre 0 et 100
                  </div>
                  <div *ngIf="(typcoupon == 5000 ) && (sn < 101 || sn > 130) && sn != '' " style="color: #f65656; font-style: italic;">
                    <span>*</span> Veuillez saisir une valeur comprise entre 100 et 130
                  </div>
                  <div *ngIf="(typcoupon == 3000 ) && (sn < 131 || sn > 145) && sn != '' " style="color: #f65656; font-style: italic;">
                    <span>*</span> Veuillez saisir une valeur comprise entre 131 et 145
                  </div>
                </div>

                <div class="col-md-6">
                  <div class="position-relative form-group">
                    <label for="serialnumber" class="">Début de plage de coupon</label>
                    <input type="text" id="serialnumber"  formControlName="from" class="form-control">
                  </div>
                  <div *ngIf="form['from'].invalid && (form['from'].dirty || form['from'].touched)"
                       class="mb-2"  style="color: #f65656; font-style: italic;">

                    <div *ngIf="form['from'].errors?.['required']" class="ml-3">
                      le numéro de série est obligatoire.
                    </div>
                    <!--                <div *ngIf="cartonForm.controls['serialNumber'].errors?.['min']" class="ml-3">-->
                    <!--                  entrez un numéro supérieur-->
                    <!--                </div>-->
                    <!--                <div *ngIf="cartonForm.controls['serialNumber'].errors?.['max']" class="ml-3">-->
                    <!--                  entrez un numéro inférieur-->
                    <!--                </div>-->

                  </div>
                  <div *ngIf="(typcoupon == 10000 ) && (sn < 1 || sn > 100) && sn != ''" style="color: #f65656; font-style: italic;" >
                    <span>*</span> Veuillez saisir une valeur comprise entre 0 et 100
                  </div>
                  <div *ngIf="(typcoupon == 5000 ) && (sn < 101 || sn > 130) && sn != '' " style="color: #f65656; font-style: italic;">
                    <span>*</span> Veuillez saisir une valeur comprise entre 100 et 130
                  </div>
                  <div *ngIf="(typcoupon == 3000 ) && (sn < 131 || sn > 145) && sn != '' " style="color: #f65656; font-style: italic;">
                    <span>*</span> Veuillez saisir une valeur comprise entre 131 et 145
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="position-relative form-group">
                    <label for="serialnumber" class="">Fin de plage de coupon</label>
                    <input type="text" id="serialnumber"  formControlName="to" class="form-control">
                  </div>
                  <div *ngIf="form['to'].invalid && (form['to'].dirty || form['to'].touched)"
                       class="mb-2"  style="color: #f65656; font-style: italic;">

                    <div *ngIf="form['to'].errors?.['required']" class="ml-3">
                      le numéro de série est obligatoire.
                    </div>
                    <!--                <div *ngIf="cartonForm['serialNumber'].errors?.['min']" class="ml-3">-->
                    <!--                  entrez un numéro supérieur-->
                    <!--                </div>-->
                    <!--                <div *ngIf="cartonForm['serialNumber'].errors?.['max']" class="ml-3">-->
                    <!--                  entrez un numéro inférieur-->
                    <!--                </div>-->

                  </div>
                  <div *ngIf="(typcoupon == 10000 ) && (sn < 1 || sn > 100) && sn != ''" style="color: #f65656; font-style: italic;" >
                    <span>*</span> Veuillez saisir une valeur comprise entre 0 et 100
                  </div>
                  <div *ngIf="(typcoupon == 5000 ) && (sn < 101 || sn > 130) && sn != '' " style="color: #f65656; font-style: italic;">
                    <span>*</span> Veuillez saisir une valeur comprise entre 100 et 130
                  </div>
                  <div *ngIf="(typcoupon == 3000 ) && (sn < 131 || sn > 145) && sn != '' " style="color: #f65656; font-style: italic;">
                    <span>*</span> Veuillez saisir une valeur comprise entre 131 et 145
                  </div>
                </div>

              <div class="float-right">

                <button type="submit" class="btn btn-primary" [disabled]="supplyForm.invalid || (isLoading$ | async)">
                  <i *ngIf="isLoading$ | async" class="fa fa-spinner fa-spin"></i>&nbsp;
                  <span *ngIf="isLoading$ | async">Enregistrement...</span>
                  <span *ngIf="!(isLoading$ | async)" (click)="supplyCarton()">Enregistrer</span>
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>



